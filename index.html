<!DOCTYPE html>
<html lang="my">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Menu - Redirecting...</title>
  <meta http-equiv="refresh" content="10;url=https://qr-menu-firebase-cex4wc3ghyukqngnhhr7r2.streamlit.app" id="meta-redirect">
</head>
<body>
  <p style="font-family:sans-serif;text-align:center;margin-top:2rem;">လာရောက်မှုကို လက်ခံနေပါတယ်...</p>
  <p style="font-family:sans-serif;text-align:center;font-size:14px;color:#666;"><a href="#" id="fallback">အလိုအလျောက် မသွားရင် ဒီနေရာနှိပ်ပါ</a></p>
  <script>
    // Streamlit မရရင် Render ကို အလိုအလျောက် သွားမယ်
    var TARGET_BASE = "https://qr-menu-firebase-cex4wc3ghyukqngnhhr7r2.streamlit.app";
    var TARGET_BACKUP = "https://qr-menu-firebase.onrender.com";
    var qs = window.location.search || "";
    var timeoutMs = 5000;

    function go(url) {
      var u = url.replace(/\/$/, "") + qs;
      document.getElementById("meta-redirect").setAttribute("content", "0;url=" + u);
      document.getElementById("fallback").href = u;
      window.location.replace(u);
    }

    function tryPrimary() {
      var primary = TARGET_BASE.replace(/\/$/, "");
      document.getElementById("fallback").href = primary + qs;
      var controller = new AbortController();
      var id = setTimeout(function() { controller.abort(); }, timeoutMs);
      fetch(primary, { mode: "no-cors", signal: controller.signal })
        .then(function() {
          clearTimeout(id);
          go(TARGET_BASE);
        })
        .catch(function() {
          clearTimeout(id);
          if (TARGET_BACKUP && TARGET_BACKUP.trim()) {
            go(TARGET_BACKUP);
          } else {
            go(TARGET_BASE);
          }
        });
    }

    tryPrimary();
  </script>
</body>
</html>
